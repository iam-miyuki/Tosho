<form action="" method="POST">
	<h3 class= "form-title">Entrez un nom de famille</h3>
	<input type="text" id="family_name" name="family_name" placeholder="Nom de famille…"/>
	<button type="submit">Rechercher</button>
</form>

{% if searchedFamilies is defined and searchedFamilies is not null %}
	<div class="section-title">
		<h4>Résultats de recherche :
		</h4>
	</div>
	<div class="result-container">
		{% if searchedFamilies|length > 0 %}
			<ul class="result-list">
				{% for family in searchedFamilies %}
					<li>
						<a href="{{ path('loan-by-family', {familyId: family.id}) }}">
							{{ family.name|upper }}
							/
							{{ family.jpName }}
						</a>
					</li>
				{% endfor %}
			</ul>
		{% else %}
			<p>Aucune famille trouvée !</p>
		{% endif %}
	</div>
{% endif %}

{% if currentFamily %}

	<div class="current-family-container">
	<hr>
		<div >
			<h5 class="account-name">Famille
				{{ currentFamily.name|upper }}
				/
				{{ currentFamily.jpName }}</h5>
		</div>
		<div class="section-container">
		
			<h4 class="name-container section-name blue">Nouveau prêt</h4>
			<form method="POST" action="{{ path('new-loan') }}">
				<input type="hidden" name="family_id" value="{{ currentFamily.id }}">
				<label for="book_code">Code du livre :</label>
				<input type="text" name="book_code" required>
				<button type="submit">Prêter</button>
			</form>
		</div>
		<div class="section-container">
		
			<h4 class="name-container section-name yellow">Prêts en cours</h4>
			{% if loans is defined %}
				<div class="cards-wrapper">
					<div class="cards-container">
						{% if loans|length > 0 %}
							{% for loan in loans %}
								{% include 'loan/_loan_card.html.twig' with { loan: loan } %}
							{% endfor %}
						{% else %}
							<div class="no-result no-loan">
								<p>Aucun prêt en cours</p>
								<div class="result-icon empty"></div>
							</div>
						{% endif %}
					</div>
				</div>
			</div>
	</div>
	{% endif %}
{% endif %}
